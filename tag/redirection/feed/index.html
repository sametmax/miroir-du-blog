<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; redirection</title>
	<atom:link href="http://sametmax.com/tag/redirection/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Redirection 307 et 308 9</title>
		<link>http://sametmax.com/redirection-307-et-308/</link>
		<comments>http://sametmax.com/redirection-307-et-308/#comments</comments>
		<pubDate>Mon, 16 Jun 2014 00:20:14 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[http]]></category>
		<category><![CDATA[redirection]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=10575</guid>
		<description><![CDATA[Le standard HTTP 1.1 vient de <a href="http://evertpot.com/http-11-updated/">subir une mise à jour</a>.

Oui, LE standard HTTP 1.1. La fameuse <a href="http://tools.ietf.org/html/rfc2616">RFC2616</a>, qui n'a pas été touchée depuis l'année de sortie de The Matrix (coïncidence ? Je ne pense pas...).

Bref, qu'est-ce qui change ?]]></description>
				<content:encoded><![CDATA[<p>Le standard HTTP 1.1 vient de <a href="http://evertpot.com/http-11-updated/">subir une mise à jour</a>.</p>
<p>Oui, LE standard HTTP 1.1. La fameuse <a href="http://tools.ietf.org/html/rfc2616">RFC2616</a>, qui n&#8217;a pas été touchée depuis l&#8217;année de sortie de The Matrix (coïncidence ? Je ne pense pas&#8230;).</p>
<p>Bref, qu&#8217;est-ce qui change ?</p>
<p>Essentiellement la forme, qui permettra à la RFC de HTTP 2.0 de faire référence à des parties de celle de la HTTP 1.1, maintenant divisée en 8, et évitera de se répéter.</p>
<p>Le web ne va donc pas casser.</p>
<p>Mais il y a quand même intronisation officielle de la redirection 308, qui est à la 301 ce que la 307 est à la 302.</p>
<p>Je me doute que ça vous parle autant qu&#8217;un personnage de film de Charlie Chaplin en fond d&#8217;écran d&#8217;un Windows avec driver realtek.</p>
<p>Pour rappel, quand un serveur HTTP répond à un client, il lui renvoie un code pour indiquer la nature de sa réponse. Quand tout va bien, c&#8217;est 200, quand la page n&#8217;est pas trouvée, c&#8217;est le fameux 404, quand le serveur est en erreur, c&#8217;est une 50x, etc.</p>
<p>Quand le serveur renvoie un code 30x, c&#8217;est généralement une redirection : on dit au client, ce que tu cherches est ailleurs, et le client, recevant ce code, fait donc une seconde requête, sur la nouvelle adresse.</p>
<p>Le code 301 indique une redirection permanente, ce qui signifie que le client peut considérer que c&#8217;est la nouvelle adresse qui remplace l&#8217;ancienne, pour toujours.</p>
<p>Le code 302 indique une redirection temporaire, généralement on utilise ça pour orienter le client sur le site à la suite d&#8217;une action, comme la saisie d&#8217;un formulaire.</p>
<p>Mais ces deux codes ont une particularité : le client effectue une simple requête GET vers la nouvelle adresse. Si vous avez fait une requête complexe avant, par exemple une requête POST avec plein de paramètres, le client va se rediriger avec une nouvelle requête GET basique, toute l&#8217;information précédente est perdue.</p>
<p>Cela peut être ce que l&#8217;on veut. Mais parfois, on souhaite que le client fasse la redirection avec une copie exacte de la requête initiale.</p>
<p>C&#8217;est ce que fait le code 307 : une redirection temporaire, mais avec la même requêtes. C&#8217;est comme la 302, donc, mais répète la même requête deux fois.</p>
<p>Le code 308 demande aussi une redirection en répétant la requête, mais une redirection permanente, comme la 301.</p>
<p><del datetime="2014-06-16T07:31:44+00:00">C&#8217;est ce dernier qui a été ajouté officiellement au protocole, puisqu&#8217;il est déjà supporté par la plupart des navigateurs : même <a href="http://blogs.msdn.com/b/ieinternals/archive/2012/03/29/http-308-permanent-redirect-pushing-the-web-forward-by-breaking-unwanted-forward-compatibility.aspx">IE le comprends depuis 2008</a>.</del> </p>
<p>(le support est vraiment aléatoire, voir comments)</p>
<p>Par curiosité, vous pouvez tester la redirection <a href="http://webdbg.com/test/308/">ici</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/redirection-307-et-308/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/06/TWm6d7k.gif" length="542518" type="image/jpg" />	</item>
		<item>
		<title>Nginx &#8211; Redirection url si le fichier n&#8217;existe pas avec try_files 5</title>
		<link>http://sametmax.com/nginx-redirection-url-si-le-fichier-nexiste-pas-avec-try_files/</link>
		<comments>http://sametmax.com/nginx-redirection-url-si-le-fichier-nexiste-pas-avec-try_files/#comments</comments>
		<pubDate>Thu, 28 Jun 2012 20:18:55 +0000</pubDate>
		<dc:creator><![CDATA[Max]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[nginx]]></category>
		<category><![CDATA[redirection]]></category>
		<category><![CDATA[try_files]]></category>
		<category><![CDATA[url]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1060</guid>
		<description><![CDATA[Rediriger une url lorsque le fichier n'existe pas sur le serveur peut être très utile si vous décider de changer touts vos formats de fichier de jpeg à png ou formats videos de flv à mp4 etc. ]]></description>
				<content:encoded><![CDATA[<p>Rediriger une url lorsque le fichier n&#8217;existe pas sur le serveur peut être très utile si vous décider de changer touts vos formats de fichier de jpeg à png ou formats videos de flv à mp4 etc.</p>
<p>Par exemple vous décidé de convertir toutes les videos de votre serveur de flv à mp4, vous lancez un script de conversion à la volée et vous vous retrouver avec du flv et du mp4, vous pouvez modifier votre script php, python, etc pour tester si la video est en flv ou mp4 ou le faire directement au niveau de nginx qui a une fonction pour: <a href="http://wiki.nginx.org/HttpCoreModule#try_files" title="try_files nginx">try_files</a>.</p>
<p><strong>Dans votre config nginx server:<br />
</strong></p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">server <span style="color: #7a0874; font-weight: bold;">&#123;</span>
     <span style="color: #666666; font-style: italic;"># Serve videos for web</span>
        location ~ <span style="color: #7a0874; font-weight: bold;">&#40;</span>.<span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>\.flv$ <span style="color: #7a0874; font-weight: bold;">&#123;</span> 
                try_files <span style="color: #007800;">$uri</span> <span style="color: #007800;">$uri</span><span style="color: #000000; font-weight: bold;">/</span> <span style="color: #007800;">$1</span>.mp4?<span style="color: #007800;">$args</span>;
                flv; <span style="color: #666666; font-style: italic;"># http flv module</span>
        <span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
        location ~ <span style="color: #7a0874; font-weight: bold;">&#40;</span>.<span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>\.mp4$ <span style="color: #7a0874; font-weight: bold;">&#123;</span>  
                mp4; <span style="color: #666666; font-style: italic;"># http mp4 module</span>
        <span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p>nginx va tester l&#8217;url de la video flv, si il ne la trouve pas il redirige l&#8217;url appelée mais avec l&#8217;extension mp4 cette fois-ci, $args est pour rajouter les éventuels arguments venant après la requête de l&#8217;url (ex: ?start=213424)</p>
<p>Cette astuce m&#8217;a permis entre autre de convertir à chaud 50 000 videos sur un serveur pendant que celui-ci était en prod tout en gardant les vidéos disponibles aux public et ce sans changer le script de mon site, juste en 3 lignes de conf nginx.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nginx-redirection-url-si-le-fichier-nexiste-pas-avec-try_files/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/redirection.jpg" length="142906" type="image/jpg" />	</item>
	</channel>
</rss>
