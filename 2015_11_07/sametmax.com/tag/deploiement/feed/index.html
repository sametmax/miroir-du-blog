<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; deploiement</title>
	<atom:link href="http://sametmax.com/tag/deploiement/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Les usages légaux de BitTorrent 11</title>
		<link>http://sametmax.com/les-usages-legaux-de-bittorrent/</link>
		<comments>http://sametmax.com/les-usages-legaux-de-bittorrent/#comments</comments>
		<pubDate>Sat, 15 Sep 2012 15:08:18 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[bittorent]]></category>
		<category><![CDATA[blizzard]]></category>
		<category><![CDATA[deploiement]]></category>
		<category><![CDATA[facebook]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[p2p]]></category>
		<category><![CDATA[streaming]]></category>
		<category><![CDATA[twitter]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=2094</guid>
		<description><![CDATA[BitTorrent est diabolisé, mais c'est comme la télévision: ce n'est pas parce que la majorité des gens en font un mauvais usage qu'il faut considérer que c'est une technologie satanique.]]></description>
				<content:encoded><![CDATA[<p><a href="https://fr.wikipedia.org/wiki/BitTorrent_%28protocole%29">BitTorrent</a> est diabolisé, mais c&#8217;est comme la télévision: ce n&#8217;est pas parce que la majorité des gens en font un mauvais usage qu&#8217;il faut considérer que c&#8217;est une technologie satanique.</p>
<h2>Déploiement de code</h2>
<p>BitTorrent à cela de merveilleux que plus il y a de personnes qui téléchargent, plus le téléchargement est rapide. Pour cette raison, les grandes entreprises l&#8217;utilisent pour déployer leur code en productions sur leurs centaines de serveur, avec des <a href="http://vimeo.com/11280885">gains de vitesse allant jusqu&#8217;à 7500 %</a>.</p>
<p>Twitter et <a href="http://torrentfreak.com/facebook-uses-bittorrent-and-they-love-it-100625/">Facebook</a> sont connus pour utiliser le protocole p2p pour économiser exactement ça.</p>
<h2>Distribution de patch et vente de jeux</h2>
<p>On pense toujours que le peer to peer ce n&#8217;est pas pour le kikoo lol moyen, que c&#8217;est compliqué. Mais en fait énormément de Kevin de base utilisent BitTorrent sans le savoir.</p>
<p>La raison ?</p>
<div id="attachment_2112" style="width: 366px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2012/09/patch3.jpg" class="grouped_elements" rel="tc-fancybox-group2094"><img class=" wp-image-2112 " title="Vous jouez à Wow, SC2 ou Diablo 3 ? Vous utilisez BitTorrent !" src="http://sametmax.com/wp-content/uploads/2012/09/patch3.jpg" alt="Capture d'écran du logiciel de mise à jour des jeux Blizzard" width="356" height="316" /></a><p class="wp-caption-text">Vous jouez à Wow, SC2 ou Diablo 3 ? Vous utilisez BitTorrent !</p></div>
<p>Blizzard utilise en effet BitTorrent dans son fameux logiciel &#8220;Blizzard downloader&#8221; pour distribuer les installeurs des jeux vendus sur Battle.net, mais également toutes les mises à jour des dit jeux.</p>
<p>Quand on a des millions de joueurs qui sont du coup autant de serveurs, on économise un MAX de pognon. On parle de millions d&#8217;euros là.</p>
<h2>Distribution d&#8217;iso</h2>
<p>Quelqu&#8217;un qui surf sur Internet (<a href="http://en.wikipedia.org/wiki/Usage_share_of_operating_systems#Servers">60% des serveurs Web dans le monde</a>), utilise un téléphone Android ou regarde une vidéo sur sa Freebox utilise Linux. Or l&#8217;acquisition d&#8217;une ISO d&#8217;installation Linux se fait massivement à travers BitTorrent, pour justement éviter de surcharger les éditeurs de distro qui ont un budget limité. Votre serviteur tape d&#8217;ailleurs cet article sur une Ubuntu installé depuis une ISO téléchargée via BitTorrent.</p>
<p>D&#8217;une manière générale, si on a un gros fichier à partager sur un blog, le mettre à disposition via BitTorrent est ce qu&#8217;il y a de plus pratique, ça évite de tuer son hébergement. Pour cette raison, <a href="http://noisemore.wordpress.com/2006/03/14/amazon-s3-has-bittorrent-support/">Amazon S3 le supporte par défaut</a>.</p>
<h2>Potentiel</h2>
<p>Parce que des gens stressés par la mutation des mœurs ne voient pas plus loin que le bout de leur narines, et parce que &#8220;BitTorrent, c&#8217;est surtout utilisé pour pirater, il faut pas déconner&#8221;, cette technologie est largement sous exploitée. On pourrait faire la mise à jour de tous les logiciels avec, même la mise à jour des OS, et carrément l&#8217;intégrer dans les gestionnaires de paquets. On pourrait faire du streaming avec: chaque visionneur repartageant des paquets, et allégeant la charge des fournisseurs de VOD.</p>
<p>Si l&#8217;usage de BitTorrent se généralise, ce sont des économies à l&#8217;échelle du monde qui seront réalisées, mais aussi l&#8217;opportunité pour plein de &#8220;petits&#8221; de mettre à disposition du gros contenu pour le grand public. Ce serait fabuleux que tous les navigateurs intègrent le téléchargement BitTorrent par défaut, comme le fait <a href="http://help.opera.com/Windows/9.00/en/bittorrent.html">Opéra</a> (qui est d&#8217;ailleurs aussi <a href="http://www.opera.com/download/torrents/">téléchargeable</a> en torrent). Parce que pour le moment, allez proposer à mamie de télécharger un truc avec BitTorrent&#8230; J&#8217;ai expliqué à mon père il y a quelques semaines, lui qui pourtant sait ce que c&#8217;est qu&#8217;un cable SCSI et qui a été le premier à utiliser CloneCD en son temps, il a eu du mal.</p>
<p>Pour le moment, les ports sont souvent bloqués, le protocole est souvent bridé, les applications <a href="http://torrentfreak.com/apple-sorry-bittorrent-apps-were-approved-by-mistake-120911/">censurées</a> sur les appstores, et tout ce potentiel est perdu.</p>
<p>Chers éditeurs de contenu, même dans le cas improbable ou vous gagniez la bataille de la maîtrise du Net, empêchant les méchants pirates de vous voler de quoi vous acheter votre prochain coupé sport, j&#8217;ai toujours un disque dur externe et des amis. Qui en ont aussi.</p>
<p>Donc puisque vous ne pouvez pas arrêter le piratage sans transformer le pays en dictature stalinienne, ayez au moins la décence de laisser tranquille des technologies brillantes et extraordinairement utiles pour tous. C&#8217;est peut être un détail pour vous, mais pour nous ça veut dire beaucoup.</p>
<p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/les-usages-legaux-de-bittorrent/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/Kinder-interdit-Armes-autorisées-640x303.jpg" length="36217" type="image/jpg" />	</item>
		<item>
		<title>Mettre automatiquement DEBUG sur False en production pour Django 2</title>
		<link>http://sametmax.com/mettre-automatiquement-debug-sur-false-en-production-pour-django/</link>
		<comments>http://sametmax.com/mettre-automatiquement-debug-sur-false-en-production-pour-django/#comments</comments>
		<pubDate>Sat, 01 Sep 2012 14:24:22 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[deploiement]]></category>
		<category><![CDATA[django]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[settings]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1913</guid>
		<description><![CDATA[L'avantage des fichiers de settings en pur Python, c'est qu'on peut faire des trucs mignons comme ça....]]></description>
				<content:encoded><![CDATA[<p>L&#8217;avantage des fichiers de settings en pur Python, c&#8217;est qu&#8217;on peut faire des trucs mignons comme:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">socket</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">socket</span>.<span style="color: black;">gethostname</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'monsupersite.com'</span>:
    DEBUG <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    DEBUG <span style="color: #66cc66;">=</span> <span style="color: #008000;">True</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/mettre-automatiquement-debug-sur-false-en-production-pour-django/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/08/miss-post-it.jpg" length="50732" type="image/jpg" />	</item>
		<item>
		<title>Travailler moins pour gagner plus, en 15 minutes avec Python fabric 4</title>
		<link>http://sametmax.com/travailler-moins-pour-gagner-plus-en-15-minutes-avec-python-fabric/</link>
		<comments>http://sametmax.com/travailler-moins-pour-gagner-plus-en-15-minutes-avec-python-fabric/#comments</comments>
		<pubDate>Wed, 22 Feb 2012 01:09:47 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[deploiement]]></category>
		<category><![CDATA[fabric]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=190</guid>
		<description><![CDATA[J'ai longtemps ignoré l'outil automatique de déploiement <a href="http://docs.fabfile.org/en/1.4.0/index.html">fabric</a>. Un jour, après avoir chassé un bug des heures dû à une erreur sur un process de mise en ligne, je me suis motivé. Bonne surprise, ça m'a pris 30 minutes. Avec cet cet article ça vous en prendra 15.]]></description>
				<content:encoded><![CDATA[<p>Apprendre encore un nouvel outil, c&#8217;est du temps et de l&#8217;énergie. Du coup j&#8217;ai longtemps ignoré l&#8217;outil automatique de déploiement <a href="http://docs.fabfile.org/en/1.4.0/index.html">fabric</a>.</p>
<p>On vit très bien sans, mais un jour, après avoir chassé un bug des heures qui n&#8217;était dû qu&#8217;à une erreur de ma part sur un process répétitif et ennuyeux de mise en ligne,  je me suis motivé. Bonne surprise, ça m&#8217;a pris 30 minutes. Et avec cet article, ça vous en prendra 15.</p>
<h2>Avant</h2>
<p>Fabric est un outil qui vous permet d&#8217;écrire, en Python, un script de déploiement ; c&#8217;est à dire d&#8217;automatiser la mise en ligne d&#8217;une nouvelle version de votre site.</p>
<p>Comme ça, ça n&#8217;a pas l&#8217;air d&#8217;être quelque chose qu&#8217;on utilise souvent, mais pourtant, quand vous corrigez un simple bug dans une requête AJAX sur un projet Django sauvegardé dans Git, voilà ce que vous devez faire:</p>
<ol>
<li><code>git pull remote branch</code> (pour s&#8217;assurer que personne n&#8217;a modifié le code entre temps)</li>
<li><code>git push remote branch</code> (pour sauvegarder votre code tout frais)</li>
<li><code>ssh user@host</code> (pour aller sur le serveur distant)</li>
<li><code>cd /path/to/project</code></li>
<li><code>workon virtualenv</code></li>
<li><code>./manage.py collectstatic </code>(pour que le nouveau fichier Javascript soit mis en ligne)</li>
<li><code>supervisorctl -c settings/prod_supervisor.ini restart all </code>(pour redémarrer les workers et qu&#8217;ils prennent en compte les modifications du code Python)</li>
</ol>
<div>À un moment, vous allez vous planter dans une étape, tellement c&#8217;est ennuyeux et répétitif.</div>
<div></div>
<h2>Après</h2>
<p>Comme d&#8217;hab, on commence par un coup de <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> fabric</pre></td></tr></table></div>

<p>Et dans un fichier <code>fabfile.py</code> à la racine de votre projet en local:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> fabric.<span style="color: black;">api</span> <span style="color: #ff7700;font-weight:bold;">import</span> local<span style="color: #66cc66;">,</span> run<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">cd</span><span style="color: #66cc66;">,</span> env<span style="color: #66cc66;">,</span> prefix
&nbsp;
REMOTE_WORKING_DIR <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/path/to/project'</span>
&nbsp;
env.<span style="color: black;">hosts</span> <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #483d8b;">'siteweb.com'</span><span style="color: black;">&#93;</span>
env.<span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'username'</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> push<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'master'</span><span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'origin'</span><span style="color: #66cc66;">,</span> runlocal<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> runlocal:
        <span style="color: #808080; font-style: italic;"># lance la commande en local</span>
        local<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;git push %s %s&quot;</span> % <span style="color: black;">&#40;</span>remote<span style="color: #66cc66;">,</span> branch<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">else</span>:
        <span style="color: #808080; font-style: italic;"># lance la commande sur les serveurs de la liste eng.hosts</span>
        run<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;git push %s %s&quot;</span> % <span style="color: black;">&#40;</span>remote<span style="color: #66cc66;">,</span> branch<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> pull<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'master'</span><span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'origin'</span><span style="color: #66cc66;">,</span> runlocal<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> runlocal:
        local<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;git pull %s %s&quot;</span> % <span style="color: black;">&#40;</span>remote<span style="color: #66cc66;">,</span> branch<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">else</span>:
        run<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;git pull %s %s&quot;</span> % <span style="color: black;">&#40;</span>remote<span style="color: #66cc66;">,</span> branch<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> sync<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'master'</span><span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'origin'</span><span style="color: #66cc66;">,</span> runlocal<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>:
    pull<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">,</span> runlocal<span style="color: black;">&#41;</span>
    push<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">,</span> runlocal<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> deploy<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'master'</span><span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'origin'</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># execute toutes les commandes dans ce dossier</span>
    <span style="color: #ff7700;font-weight:bold;">with</span> <span style="color: #dc143c;">cd</span><span style="color: black;">&#40;</span>REMOTE_WORKING_DIR<span style="color: black;">&#41;</span>:
        <span style="color: #808080; font-style: italic;"># excute toutes les commandes avec celle-ci avant</span>
        <span style="color: #ff7700;font-weight:bold;">with</span> prefix<span style="color: black;">&#40;</span><span style="color: #483d8b;">'workon virtualenv'</span><span style="color: black;">&#41;</span>:
            pull<span style="color: black;">&#40;</span>branch<span style="color: #66cc66;">,</span> remote<span style="color: #66cc66;">,</span> <span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
            run<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;./manage.py collectstatic --noinput&quot;</span><span style="color: black;">&#41;</span>
            run<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;supervisorctl -c settings/prod_supervisor.ini restart all&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Et voilà du temps de sauvé, et des erreurs évitées pour un investissement vraiment minimal. </p>
<p>Synchroniser son code avec le reste de l&#8217;équipe: <code>fab sync</code><br />
Déployer le code en production: <code>fab deploy</code><br />
Les deux: <code>fab sync deploy</code></p>
<p>Et ce n&#8217;est qu&#8217;une intro. On peut faire des choses biens plus avancées, notamment gérer plusieurs type de déploiements, de serveurs, etc.</p>
<p>Notez qu&#8217;on pourrait faire le faire en bash sans avoir à installer fabric, mais un script bash, c&#8217;est tellement laborieux à faire évoluer&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/travailler-moins-pour-gagner-plus-en-15-minutes-avec-python-fabric/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/02/not-a-lazy-boy.jpg" length="32040" type="image/jpg" />	</item>
	</channel>
</rss>
