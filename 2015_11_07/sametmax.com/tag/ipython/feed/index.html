<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; ipython</title>
	<atom:link href="http://sametmax.com/tag/ipython/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Travailler à deux sur iPython à distance 16</title>
		<link>http://sametmax.com/travailler-a-deux-sur-ipython-a-distance/</link>
		<comments>http://sametmax.com/travailler-a-deux-sur-ipython-a-distance/#comments</comments>
		<pubDate>Wed, 17 Dec 2014 12:46:43 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=12902</guid>
		<description><![CDATA[<a href="http://sametmax.com/profiter-du-notebook-de-ipython/">iPython notebook</a>, c'est pratique, mais une seule personne peut coder à la fois. Si quelqu'un veut voir les changements, il faut recharger avec F5. A l'heure des Google Doc temps réel, c'est con. Surtout que c'est du ZMQ derrière.]]></description>
				<content:encoded><![CDATA[<p>Bon, j&#8217;ai pas fini mon slideshow sur WAMP, donc je vais faire un article sur ça.</p>
<p><a href="http://sametmax.com/profiter-du-notebook-de-ipython/">iPython notebook</a>, c&#8217;est pratique, mais une seule personne peut coder à la fois. Si quelqu&#8217;un veut voir les changements, il faut recharger avec F5. A l&#8217;heure des Google Doc temps réel, c&#8217;est con. Surtout que c&#8217;est du ZMQ derrière.</p>
<p>Du coup je me suis lancé dans une expérimentation avec <a href="https://togetherjs.com/docs/">TogetherJS</a>, la lib de Momo pour le travail collaboratif.</p>
<p>Pour lancer le truc, il suffit d&#8217;aller dans son dossier de profile iPython et éditer le fichier Javascript vierge fait pour étendre l&#8217;outil. Par exemple, sous Ubuntu, mon profile par défaut est dans <code>~/ipython/profile_default</code> et le fichier à éditer est <code>./profile_default/static/custom/custom.js</code>.</p>
<p>Dedans on met :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">TogetherJSConfig_autoStart <span style="color: #66cc66;">=</span> true<span style="color: #66cc66;">;</span>
TogetherJSConfig_cloneClicks <span style="color: #66cc66;">=</span> false<span style="color: #66cc66;">;</span>
TogetherJSConfig_dontShowClicks <span style="color: #66cc66;">=</span> true<span style="color: #66cc66;">;</span>
$.<span style="color: black;">getScript</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'https://togetherjs.com/togetherjs-min.js'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">;</span></pre></td></tr></table></div>

<p>Et on est bon. Il faut ouvrir deux browsers différents pour bien tester le truc, par exemple un chrominou et un firefoune. Moi j&#8217;ai ouvert deux FF parce que j&#8217;ai pleins de profiles dessus.</p>
<p>La frappe est bien synchro, mais malheureusement pas l&#8217;affichage du résultat. Y a donc bien un truc intéressant à creuser, mais pour le moment, c&#8217;est pas utilisable.</p>
<p>Ensuite, il y a des services Web. <a href="https://cloud.sagemath.com/">SageMathCloud</a> annonce faire cela, mais impossible de s&#8217;inscrire, le formulaire ne marche pas. <ahref="https://www.codebox.io">Codebox</ahref=> propose un env complet de dev en ligne, mais l&#8217;inscription est temporairement suspendue. <a href="http://codebunk.com">Codebunk</a> marche pas mal, est plutôt bien foutu et clair, mais Python 2.7 uniquement, et aucun moyen d&#8217;installer une lib, donc adieu scipy ou matplotlib.</p>
<p>Celui qui s&#8217;en rapproche le plus est <a href="https://www.pythonanywhere.com">Pythonanywhere</a> : des consoles synchronisées pour toutes les versions de Python, beaucoup de libs préinstallées (dont scipy et matplotlib), un vrai système de fichier sur lequel travailler, du pip a dispo. Et en prime un éditeur de texte pour des fichiers complets, mais qui lui, n&#8217;est pas collaboratif. Damn it. Et impossible d&#8217;afficher en ligne une image pondue via matplotlib. En plus, on a pas le concept des cellules d&#8217;iPython, qui est super pratique.</p>
<p>Bref, il manque vraiment un outil pour faire ce genre de choses.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/travailler-a-deux-sur-ipython-a-distance/feed/</wfw:commentRss>
		<slash:comments>16</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/12/S4hTFRz.jpg" length="20519" type="image/jpg" />	</item>
		<item>
		<title>Rejouer un session de terminal avec playitagainsam 10</title>
		<link>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/</link>
		<comments>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/#comments</comments>
		<pubDate>Thu, 22 May 2014 08:29:36 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=10298</guid>
		<description><![CDATA[<a href="https://github.com/rfk/playitagainsam">playitagainsam</a>, ou PIAS  a pour but de rejouer des sessions shell: il lance un shell, enregistre ce qu'on y a tapé, et quand on quitte le shell, sauvegarde le tout dans un fichier. Ensuite, on peut lire le contenu du fichier et revoir la session shell telle qu'elle a été tapée.]]></description>
				<content:encoded><![CDATA[<p>Combien de fois, durant une formation, on m&#8217;a demandé si je pouvais donner un dump de la session shell.</p>
<p><a href="https://github.com/rfk/playitagainsam">playitagainsam</a>, ou PIAS, a exactement pour but de faire cela: il lance un shell, enregistre ce qu&#8217;on y a tapé, et quand on quitte le shell, sauvegarde le tout dans un fichier. Ensuite, on peut lire le contenu du fichier et revoir la session shell telle qu&#8217;elle a été tapée.</p>
<p>C&#8217;est un programme Python, on peut donc le <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> installer :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> playitagainsam <span style="color: #660033;">--user</span></pre></td></tr></table></div>

<p>Ensuite, on lance une session à enregistrer avec la sous commande record :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias record nom_du_fichier_ou_sauver_l_enregistrement</pre></td></tr></table></div>

<p>PIAS va lancer un nouveau shell, par défaut le même que votre shell actuel (souvent bash, pour moi fish), mais vous pouvez préciser un type de shell spécial avec <code>--shell</code>. Ex :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias record ex1 <span style="color: #660033;">--shell</span> ipython</pre></td></tr></table></div>

<p>A partir de là il n&#8217;y a rien à faire. On peut travailler normalement et oublier qu&#8217;on a utilisé PIAS. Une fois qu&#8217;on a terminé sa petite affaire, il suffit de sortir du shell (CTRL + D, exit, etc), et la session va être sauvegardée dans un format JSON facile à corriger à la main si vous souhaitez la rendre plus agréable :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#123;</span>
  <span style="color: #ff0000;">&quot;events&quot;</span>: <span style="color: #7a0874; font-weight: bold;">&#91;</span>
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;OPEN&quot;</span>,
      <span style="color: #ff0000;">&quot;size&quot;</span>: <span style="color: #7a0874; font-weight: bold;">&#91;</span>
        <span style="color: #000000;">162</span>,
        <span style="color: #000000;">33</span>
      <span style="color: #7a0874; font-weight: bold;">&#93;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;PAUSE&quot;</span>,
      <span style="color: #ff0000;">&quot;duration&quot;</span>: <span style="color: #000000;">0.10042214393615723</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;WRITE&quot;</span>,
      <span style="color: #ff0000;">&quot;data&quot;</span>: <span style="color: #ff0000;">&quot;\u001b]0;sam@sametmax.com: /tmp\u0007sam@sametmax.com:/tmp$ &quot;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;ECHO&quot;</span>,
      <span style="color: #ff0000;">&quot;data&quot;</span>: <span style="color: #ff0000;">&quot;touch essai&quot;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
...
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p>Quand vous voulez rejouer la session :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias play fichier_d_enregistrement</pre></td></tr></table></div>

<p>Par défaut il faut appuyer sur une touche quelconque du clavier pour voir apparaitre chaque caractère, donnant l&#8217;impression que vous êtes un hacker de Hollywood. C&#8217;est rigolo, mais parfaitement chiant à la longue. On peut faire jouer la session automatiquement avec l&#8217;option <code>--auto-type</code> qui va taper chaque ligne automatiquement. Il suffira alors d&#8217;appuyer sur entrée à chaque ligne pour avoir le résultat suivant. C&#8217;est mon mode préféré. </p>
<p>Si vous êtes un gros feignant, vous pouvez tout jouer en automatique en rajoutant l&#8217;option <code>--auto-waypoint</code> qui va vous dispenser de taper entrée à chaque fin de ligne. Ex :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias play ex1 <span style="color: #660033;">--auto-type</span> <span style="color: #660033;">--auto-waypoint</span></pre></td></tr></table></div>

<p><strong>La session jouée est simulée.</strong> Elle n&#8217;a aucun impacte sur le système. Si vous faites un <code>mkdir</code> dans bash ou un <code>shutil.rmtree</code> dans python, ça ne fera rien.</p>
<p>Néanmoins, parfois il est utile d&#8217;avoir le effets réels des commandes. Dans ce cas on peut utiliser <code>--live-replay</code>. Attention, faites bien gaffe à ce que vous allez jouer&#8230;</p>
<p>playitagainsam est intéressant pour tout ce qui est formation et tutorial, d&#8217;autant plus qu&#8217;il existe un <a href="https://github.com/rfk/playitagainsam-js/">player javascript</a> pour faire la démonstration de vos sessions shell sur un blog ou un slideshow.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/05/G67guCh.jpg" length="36803" type="image/jpg" />	</item>
		<item>
		<title>WARNING: File not found. Did you forget to save? 1</title>
		<link>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/</link>
		<comments>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/#comments</comments>
		<pubDate>Sat, 26 Oct 2013 07:58:23 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[sublime text]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7541</guid>
		<description><![CDATA[Un lecteur nous a <a href="http://sametmax.com/profiter-du-notebook-de-ipython/#comment-15166">rapporter ce problème</a> quand il utilisait la commande magique <code>%edit</code> dans IPython avec Sublime Text.]]></description>
				<content:encoded><![CDATA[<p>Un lecteur nous a <a href="http://sametmax.com/profiter-du-notebook-de-ipython/#comment-15166">rapporté ce problème</a> quand il utilisait la commande magique <code>%edit</code> dans IPython avec Sublime Text.</p>
<p>Magie d&#8217;internet, un autre lecteur lui a répondu en comment, mais je me dis que donner un peu de visibilité à la réponse peut pas faire de mal, vu que je n&#8217;ai pas trouvé facilement la solution via <del datetime="2013-10-25T12:40:42+00:00">Google</del> DuckDuckGo.</p>
<p>L&#8217;idée est tout simplement d&#8217;utiliser l&#8217;option <code>-w</code> dans la ligne de commande pour appeler l&#8217;éditeur. En effet, sans cela l&#8217;appel à ST est non bloquant, et IPython perd la référence au processus sans avoir de valeur de retour.</p>
<p>Par exemple, dans votre <em>ipython_config.py</em> :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;sublime_text -w&quot;</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/tumblr_mv0imm4izr1r539hzo1_500.jpg" length="48151" type="image/jpg" />	</item>
		<item>
		<title>Profiter du notebook de IPython  23</title>
		<link>http://sametmax.com/profiter-du-notebook-de-ipython/</link>
		<comments>http://sametmax.com/profiter-du-notebook-de-ipython/#comments</comments>
		<pubDate>Wed, 23 Oct 2013 13:53:15 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7507</guid>
		<description><![CDATA[IPython est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec tellement d&#8217;astuces intégrées que ça donne envie de vomir des arc-en-ciel. Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : le notebook. Si vous êtes [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="http://ipython.org">IPython</a> est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec <a href="http://sametmax.com/tag/ipython/">tellement d&#8217;astuces intégrées</a> que ça donne envie de vomir des arc-en-ciel.</p>
<p>Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : <a href="http://ipython.org/notebook.html">le notebook</a>.</p>
<p>Si vous êtes scientifique ou manipulez pas mal de graphiques et de données numériques, <a href="http://www.randalolson.com/2012/05/12/a-short-demo-on-how-to-use-ipython-notebook-as-a-research-notebook/">c&#8217;est un must have</a>. Mais personnellement je trouve que c&#8217;est aussi un fantastique outil d&#8217;éducation, c&#8217;est génial pour les cours, les démos, et expérimenter avec du code inconnu.</p>
<p>Ça se présente sous la forme d&#8217;un shell IPython intégré dans une page Web, mais que l&#8217;on peut avoir sur son desktop, pas besoin d&#8217;avoir un serveur distant. Si vous avez un peu de temps, voici une vidéo de démo (avec un musique horrible) :</p>

<!-- iframe plugin v.2.9 wordpress.org/plugins/iframe/ -->
<iframe width="420" height="315" src="//www.youtube.com/embed/H6dLGQw9yFQ" frameborder="0" scrolling="no" class="iframe-class"></iframe>

<p>L&#8217;installation sous Ubuntu, c&#8217;est juste :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get install</span> ipython-notebook</pre></td></tr></table></div>

<p>Pour Windows, il me semble, de mémoire, que c&#8217;est intégré dans l&#8217;exe. Pour Mac, je ne sais pas.</p>
<p>Et derrière il suffit de lancer la commande :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">ipython notebook</pre></td></tr></table></div>

<p>Et il va vous ouvrir votre navigateur avec un onglet sur votre notebook.</p>
<p>L’intérêt principal du notebook est que TOUT le code est coloré et est modifiable comme sur dans fichier mais TOUT le code est exécutable (et affiche son résultat juste après chaque ligne) comme dans un shell iPython, avec completion du code. Le meilleur des deux mondes quoi.</p>
<p>En prime on peut embeder du <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a> (et donc des liens, des images, etc) dans le même notebook, sauvegarder ça pour plus tard, le partager, etc.</p>
<p>Personnellement, j&#8217;ai ceci dans mon .bashrc :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">notebook <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">processes</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-i</span> <span style="color: #660033;">-P</span> <span style="color: #ff0000;">&quot;ipython notebook&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">wc</span> -l<span style="color: #7a0874; font-weight: bold;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$processes</span> <span style="color: #660033;">-lt</span> <span style="color: #000000;">2</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">pushd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp
        <span style="color: #c20cb9; font-weight: bold;">nohup</span> ipython notebook <span style="color: #660033;">--port</span> <span style="color: #000000;">8889</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">&amp;</span>
        <span style="color: #7a0874; font-weight: bold;">popd</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        firefox http:<span style="color: #000000; font-weight: bold;">//</span>127.0.0.1:<span style="color: #000000;">8889</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p>Comme ça en une commande je lance le serveur du notebook sur le port que je veux si il ne tourne pas, et si il tourne, j&#8217;ouvre firefox et ouvre un onglet dessus.</p>
<p>Quelques autres options très utiles :</p>
<p><strong>&#8211;pylab </strong>: Charger plein de libs pour transformer IPython en un matlab killer.<br />
<strong>&#8211;gui=lib </strong> : permet d&#8217;intégrer l&#8217;event loop de QT, wx, gtk, etc.<br />
<strong>&#8211;ip=0.0.0.0</strong> : si on veut que d&#8217;autres puisse accéder à notre notebook.</p>
<p>Il existe un <a href="http://nbviewer.ipython.org/">espèce de pastebin</a> spécialement fait pour le notebook, qui permet de partager ses expérimentations.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/profiter-du-notebook-de-ipython/feed/</wfw:commentRss>
		<slash:comments>23</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/piNYkzq.jpg" length="97823" type="image/jpg" />	</item>
		<item>
		<title>Nouvelle config iPython 9</title>
		<link>http://sametmax.com/nouvelle-config-ipython/</link>
		<comments>http://sametmax.com/nouvelle-config-ipython/#comments</comments>
		<pubDate>Sun, 19 May 2013 17:24:44 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6158</guid>
		<description><![CDATA[J'ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.

Voici ce que j'ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>...]]></description>
				<content:encoded><![CDATA[<p>J&#8217;ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.</p>
<p>Voici ce que j&#8217;ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'doctest_mode on'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from __future__ import unicode_literals, absolute_import, division'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import sys'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import os'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import re'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import json'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import base64'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import calendar'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import csv'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import datetime'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import itertools'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import random'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import hashlib'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import tempfile'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import argparse'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import math'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import random'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import subprocess'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from glob import glob'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from uuid import uuid4'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from collections import Counter, OrderedDict'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">&quot;&quot;&quot;
def initial_imports():
&nbsp;
    # ne faites pas ça dans un code de prod :-)
    global path, relativedelta, requests 
&nbsp;
    print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nImported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
&nbsp;
    try:
        from path import path
        print('Imported : &quot;path&quot;')
    except ImportError:
        print(&quot;'path' is not available&quot;)
&nbsp;
    try:
        from dateutil import relativedelta
        print('Imported : &quot;relativedelta&quot;')
    except ImportError:
        print(&quot;'dateutil' is not available&quot;)
&nbsp;
    try:
        import requests
        print('Imported : &quot;requests&quot;')
    except ImportError:
        print(&quot;'requests' is not available&quot;)
&nbsp;
    try:
        env = os.environ['VIRTUAL_ENV']
        print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nENV '{}'. You can import:<span style="color: #000099; font-weight: bold;">\\</span>n&quot;.format(os.path.basename(env)))
        cmd = subprocess.check_output([env + &quot;/bin/pip&quot;, &quot;freeze&quot;],
                                      stderr=subprocess.STDOUT).strip().split(&quot;<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
        p = re.compile(r'(^.*<span style="color: #000099; font-weight: bold;">\:</span><span style="color: #000099; font-weight: bold;">\s</span>)|((#|@).*$)|(==.*$)')
        print(&quot;'&quot; + &quot;', '&quot;.join(sorted(set(os.path.basename(p.sub('', f)) for f in cmd))) + &quot;'&quot;)
    except KeyError:
        pass
&nbsp;
    print('')
&quot;&quot;&quot;</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">&quot;initial_imports()&quot;</span>
<span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Du coup, au démarrage d&#8217;iPython j&#8217;ai les bénéfices suivant :</p>
<ul>
<li>Comportement de Python 3 pour l&#8217;unicode, les imports et la division. Ils sont plus sains et facile à manipuler (plus besoin de préfixer de &#8216;u&#8217; les chaînes par exemple).</li>
<li>J&#8217;ai tout de suite sous la main une tonne de modules que j&#8217;utilise souvent sans avoir à les importer (os, datetime, random, etc).</li>
<li>J&#8217;importe aussi des modules optionnels (path, requests&#8230;).</li>
<li>Je sais si je suis dans un environnement virtuel, et si oui, ce qu&#8217;il y a installé dedans.</li>
</ul>
<p>Je vire aussi la bannière de démarrage :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<p>Et hop, mon affichage au démarrage ressemble à ça :</p>
<pre>$ ipython
Exception reporting mode: Plain
Doctest mode is: ON

Imported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'

'path' is not available
'dateutil' is not available
Imported : "requests"

ENV 'my_env'. You can import:

'BeautifulSoup', 'Django', 'Fabric', 'Jinja2', 'Pillow', 'Pygments', 'Sphinx', 'URLObject', 'Werkzeug', 'argparse', 'beautifulsoup4', 'colorlog', 'distribute', 'django-appconf', 'django-bootstrap-pagination', 'django-bootstrap-toolkit', 'django-compressor', 'django-debug-toolbar', 'django-extensions', 'django-guardian', 'django-loginas', 'django-model-utils', 'django-pdb', 'django-pytest', 'django-rest-framework.git', 'django-template-repl', 'docutils', 'easy-thumbnails', 'feedparser', 'gunicor

</pre>
<p>Ça fait un gros bloc visuellement, mais ça ne s&#8217;affiche qu&#8217;une fois, et le délai est acceptable.</p>
<p>Si j&#8217;ai besoin de l&#8217;info à nouveau, je peux toujours appeler :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">initial_imports<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Que ce genre de choses soient possibles et faciles me font adorer Python. La force du langage, ce n&#8217;est pas seulement son core, c&#8217;est tout son environnement, ses libs, ses outils qui gravitent autour qui rendent l&#8217;expérience de dev fantastique.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nouvelle-config-ipython/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/5e4itlu.jpg" length="273612" type="image/jpg" />	</item>
		<item>
		<title>Programmer confortablement en Python sous Windows 26</title>
		<link>http://sametmax.com/programmer-confortablement-en-python-sous-windows/</link>
		<comments>http://sametmax.com/programmer-confortablement-en-python-sous-windows/#comments</comments>
		<pubDate>Tue, 25 Dec 2012 19:05:46 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[windows]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3865</guid>
		<description><![CDATA[Python est un langage qui demande très peu pour programmer: pas d'IDE, de compilateur, de RAD ou autre. Juste un petit éditeur de texte (<a href="http://notepad-plus-plus.org/fr/">notepad++</a> fait très bien l'affaire) et la ligne de commande.

Problème, la ligne de commande est à chier sous Windows. Alors oui, vous pouvez coder dans ces conditions, mais franchement, pourquoi ne pas passer 30 minutes pour vous mettre à l'aise ?]]></description>
				<content:encoded><![CDATA[<p>Python est un langage qui demande très peu pour programmer: pas d&#8217;IDE, de compilateur, de RAD ou autre. Juste un petit éditeur de texte (<a href="http://notepad-plus-plus.org/fr/">notepad++</a> fait très bien l&#8217;affaire) et la ligne de commande.</p>
<p>Problème, la ligne de commande est à chier sous Windows. Alors oui, vous pouvez coder dans ces conditions, mais franchement, pourquoi ne pas passer 30 minutes pour vous mettre à l&#8217;aise ?</p>
<p>Max est sous Mac, et je suis sous Ubuntu, mais c&#8217;est pas pour ça qu&#8217;on oublie nos racines. On a tous les deux commencé sous Windows. Perso, j&#8217;ai fait mes premiers clics de souris sur 3.1 (avant j&#8217;avais pas de souris :-)). Alors suivez le guide.</p>
<h2>Avoir les commandes Python sous la main</h2>
<p>Les commandes installées par des scripts Python, parfois même la commande <code>python</code> elle-même, ne sont pas toujours accessibles depuis la console. Assurez-vous donc d&#8217;avoir bien &#8220;c:\Python27;c:\Python27\Scripts;&#8221; <a href="http://sametmax.com/ajouter-un-chemin-a-la-variable-denvironnement-path-sous-windows/">à la fin de votre System PATH</a>. </p>
<h2>Améliorer la console</h2>
<p>Une fois que vous avez <a href="http://www.python.org/download/releases/2.7.5/">installé Python</a> (toujours v2.7 en 32 bits. TOUJOURS), vous avez accès au shell. Premier constat, copier / coller dans un terminal cmd.exe est aussi plaisant qu&#8217;une coloscopie un lendemain de cuite (pour vous et le praticien).</p>
<p>Idéalement, il faut installer un terminal alternatif. Le logiciel opensource Console2 est parfait pour ça: on peut faire du copier / coller facilement, il a des onglets, on peut régler la taille de la fenêtre&#8230;</p>
<p>Pour l&#8217;installer suffit de <a href="http://sourceforge.net/projects/console/">télécharger le zip</a>, l&#8217;extraire dans &#8220;C:\Programmes Files&#8221; et faire un raccourci sur le bureau vers &#8220;C:\Program Files\Console2\Console.exe&#8221;.</p>
<h2>Améliorer le shell Python</h2>
<p>Le shell Python est fantastique, à l&#8217;exception de tous les autres. Donc votre premier réflexe, c&#8217;est bien entendu d&#8217;installer <a href="http://pypi.python.org/pypi/ipython">iPython</a>. Sauf que Windows n&#8217;a pas readline, du coup vous n&#8217;allez pas avoir la coloration du prompt ni la completion du code. Ca craint.</p>
<p>C&#8217;est là que <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> va encore une fois nous sauver la mise:</p>
<p><code>pip install pyreadline</code></p>
<p>Et votre shell iPython, lancé depuis Console2 est maintenant un outil presque aussi confortable à utiliser que sous Linux ou Mac avec historique, auto indent et tout le toutim. Presque, faut pas abuser non plus.</p>
<h2>Et pour quelques outils de plus</h2>
<p>Windows n&#8217;ayant pas de truc comme grep, installer <a href="http://sametmax.com/grin-le-grep-python-sous-steroid/">grin </a>va vous permettre de rapidement et confortablement chercher dans votre code. <code>Donc, pip install grin</code>.</p>
<p>Mais aller directement dans le dossier voulu depuis la ligne de commande à grand coup de <code>cd</code>, c&#8217;est relou. On va arranger ça.</p>
<p>Ouvre l&#8217;éditeur de registre (&#8220;Windows + R&#8221; puis regedit puis &#8220;enter&#8221;) et naviguez dans l&#8217;arboresence jusqu&#8217;à:</p>
<p><code>HKEY_CLASSES_ROOT\Directory\shell\</code></p>
<p>Cliquez droit dans le panel de droite, et faites &#8220;Nouveau > Clé&#8221; et appelez la clé &#8220;open_shell&#8221;. Puis cliquez sur le dossier ainsi créé, et dans le panel de droite, cliquez sur l&#8217;espèce d&#8217;icône &#8220;AB&#8221; intitulée &#8220;(Par défaut)&#8221;, et donnez lui la valeur &#8220;Ouvrir Console2 ici&#8221;.</p>
<p>Dans le dossier &#8220;open_shell&#8221;, créez un dossier &#8220;Command&#8221; (en faisant &#8220;Clic Droit > Nouveau > Clé&#8221;).</p>
<p>Donnez à &#8220;(Par défaut)&#8221; pour valeur le chemin vers Console2 suivit de &#8216;-d &#8220;%1&#8243;&#8216;, par exemple pour moi:</p>
<p><code>"C:\Program Files (x86)\Console2\Console.exe" -d "%1"</code></p>
<p>Fermer l&#8217;explorateur de fichiers, et réouvrez le. Hop ! Vous avez une nouvelle entrée dans le menu du clic droit qui permet d&#8217;ouvrir Console2 dans n&#8217;importe quel dossier.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/programmer-confortablement-en-python-sous-windows/feed/</wfw:commentRss>
		<slash:comments>26</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/img_0203.jpg" length="141409" type="image/jpg" />	</item>
		<item>
		<title>Quelques bonnes raisons de plus d&#8217;utiliser iPython 7</title>
		<link>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/</link>
		<comments>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/#comments</comments>
		<pubDate>Sun, 23 Dec 2012 18:01:36 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[docstring]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3644</guid>
		<description><![CDATA[Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.]]></description>
				<content:encoded><![CDATA[<p>Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.</p>
<p>Voici quelques commandes qui vous donneront moult raisons de plus pour très vite installer ce shell alternatif.</p>
<h2>Autocall</h2>
<p>Taper des parenthèses et des guillemets, c&#8217;est sooooooo 1995.  iPython peut vous les rajouter automatiquement dans les appels de fonctions, il faut juste préfixer de &#8220;/&#8221;, &#8220;,&#8221; ou &#8220;;&#8221; votre appel de fonction pour qu&#8217;il fasse la conversion:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">/f <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span><span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">,</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1&quot;</span><span style="color: #66cc66;">,</span><span style="color: #483d8b;">&quot;2&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">;</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1 2&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Accès au shell système</h2>
<p>Préfixez votre commande d&#8217;un &#8220;!&#8221; bien couillu, et iPython va vous exécuter ça dans le shell système (par exemple bash) et vous retourner le résulat:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">!</span> cat /etc/fstab | grep <span style="color: #483d8b;">'ext4'</span>
UUID<span style="color: #66cc66;">=</span>e33c5b98-<span style="color: #ff4500;">1570</span>-44d6-a32f-5e7970e1e588 /               ext4    errors<span style="color: #66cc66;">=</span>remount-ro <span style="color: #ff4500;">0</span>       <span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<p>Oui, oui, on est dans un shell Python là. Ou comment bien faire chier la coloration syntaxique de votre blog.</p>
<p>Et on peut mettre tout ça dans une variable et le traiter en Python derrière:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> files <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">!</span>ls
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>f.<span style="color: black;">upper</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #483d8b;">'BUREAU'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'DOCUMENTS'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'EXAMPLES.DESKTOP'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'IMAGES'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'MOD<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a8LES'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'MUSIQUE'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'PUBLIC'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'T<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9L<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9CHARGEMENTS'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'UBUNTU ONE'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'VID<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9OS'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>A noter que tout est exécuté dans un autre process, ainsi <code>!cd</code> n&#8217;aura aucun effet. Mais tout est prévu: <code>%cd</code> et <code>%pwd</code> proxient tout ça vers <code>os.chdir</code> et <code>os.getcwd</code> :-)</p>
<h2>Debugger</h2>
<p>Entrez <code>%timeit</code> expression pour qu&#8217;il qu&#8217;iPython vous l&#8217;exécute 10000000 fois et vous donne sa performance.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> %<span style="color: #dc143c;">timeit</span> x<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">100</span>
<span style="color: #ff4500;">10000000</span> loops<span style="color: #66cc66;">,</span> best of <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">22.5</span> ns per loop</pre></td></tr></table></div>

<p>Autre commande: <code>%pdb</code> vous lancera automatiquement votre <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">débuggeur favoris</a> si une exception se lève durant votre session.</p>
<h2>Se faciliter la vie</h2>
<p><code>%edit</code> ouvre un editeur (par défault VI sous nunux, mais c&#8217;est <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">configurable</a>), et si vous sauvegardez, le contenu tapé est récupéré et exécuté par iPython. Génial pour les bouts de code trop relou à taper sur le prompt.</p>
<p><code>%gui qt|wx|gtk</code> lance l&#8217;intégration de la main loop d&#8217;un des toolkits graphiques afin pour de pouvoir faire mumuse avec des widgets sans bloquer votre shell.</p>
<p>Vous étiez vous demandé pourquoi le prompt iPython était plein de <code>In</code> et de <code>Out</code>, et pas de <code>>>></code> ? Parce que tout l&#8217;historique est numéroté, et accessible:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: In<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: u<span style="color: #483d8b;">'1 + 1'</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span></pre></td></tr></table></div>

<p>Mais vous pouvez aussi utiliser <code>%doctest_mode</code> qui donne à votre prompt un air de shell Python normal. L&#8217;avantage ? On peut copier le contenu d&#8217;un autre shell dedans (et donc d&#8217;une doctest) avec les chevrons !</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">49</span><span style="color: black;">&#93;</span>: %doctest_mode
<span style="color: #008000;">Exception</span> reporting mode: Plain
Doctest mode <span style="color: #ff7700;font-weight:bold;">is</span>: ON
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> pom <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: black;">&#41;</span>:
...     ...     <span style="color: #ff7700;font-weight:bold;">print</span> pom
...     ... 
<span style="color: black;">pom</span>
pom
pom
pom</pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/277EB_mac-gyver.jpg" length="14600" type="image/jpg" />	</item>
		<item>
		<title>Personnalisez le démarrage d&#8217;iPython 8</title>
		<link>http://sametmax.com/personnalisez-le-demarrage-dipython/</link>
		<comments>http://sametmax.com/personnalisez-le-demarrage-dipython/#comments</comments>
		<pubDate>Sun, 16 Dec 2012 13:14:54 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[configuration]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3643</guid>
		<description><![CDATA[iPython, c'est bon. Et ça peut être encore meilleur.]]></description>
				<content:encoded><![CDATA[<p><a href="http://ipython.org/">iPython</a>, c&#8217;est bon. Et ça peut être encore meilleur.</p>
<p>Avant on ajoutait un peu de sel à notre super shell en éditant les fichiers <em>.ipython/ipythonrc</em> et <em>.ipython/ipy_user_conf.py</em>. Mais ça c&#8217;était avant.</p>
<p>Maintenant on fait :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span>ipython profile create</pre></td></tr></table></div>

<p>Ce qui va créer un fichier <code>~/.config/ipython/profile_default/ipython_config.py</code> (et <code>ipython_qtconsole_config.py</code> si vous avez installé la version qt).</p>
<p>Il ne vous reste plus qu&#8217;à éditer ce fichier pour personnaliser le démarrage de iPython.</p>
<h2>Executer du code au démarrage</h2>
<p>N&#8217;importe quelle ligne de code Python ou de commande magique (les trucs qui commencent pas &#8216;%&#8217; qui ne fonctionnent que dans iPython) !</p>
<p>Très utile pour les imports par exemple. Voici ce que je fais moi au démarrage :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'%doctest_mode'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import os, sys, re, json'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    from path import path
except ImportError:
    pass
'''</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    import requests
except ImportError:
    pass
'''</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    from batbelt.structs import *
    from batbelt.objects import attr
    from batbelt.strings import slugify, normalize, json_dumps, json_loads
except ImportError:
    pass
'''</span>
<span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Du coup j&#8217;ai quasiment jamais besoin d&#8217;importer un truc, car ce que j&#8217;utilise le plus est déjà là. <code>%doctest_mode</code> me permet de coller des docstrings sans me fouler.</p>
<h2>Programmation graphique</h2>
<p>iPython possède une boucle principale. Les toolkits graphiques aussi. Si vous faites vos essais du code du second dans le premier, ça va bloquer. Heureusement on peut demander à iPython d&#8217;intégrer la main loop d&#8217;un des toolkits graphiques les plus célèbres en choisissant parmi : &#8216;qt&#8217;, &#8216;wx&#8217;, &#8216;gtk&#8217;, &#8216;glut&#8217;, &#8216;pyglet&#8217; et &#8216;osx&#8217; et en settant :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">gui</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'qt'</span></pre></td></tr></table></div>

<h2>Virer le header</h2>
<p>Quand on lance le shell, il vous raconte sa vie. Pour lui dire de fermer sa gueule :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<h2>Lancer un script complet</h2>
<p>Bon, ça c&#8217;est si vous avez de gros besoins&#8230;</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">file_to_run</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/path/to/script.py'</span></pre></td></tr></table></div>

<h2>Sauter la confirmation à la fermeture</h2>
<p>Oui, je suis sûr te vouloir te fermer connard ! Tu crois que j&#8217;ai appuyé sur Ctrl + d par erreur en éternuant ?</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">confirm_exit</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<h2>Choisir son éditeur externe</h2>
<p>Si vous tapez <code>%edit</code> dans iPython, il ouvre un éditeur. Vous tapez votre code, vous sauvegardez, vous fermez. Et iPython récupère le code et l&#8217;éxécute. Par défault il utilise VI. On peut faire mieux.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/chemin/vers/sublime-text -w'</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/personnalisez-le-demarrage-dipython/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/6089448781_03743e140c_z.jpg" length="196127" type="image/jpg" />	</item>
		<item>
		<title>Lancer automatiquement le debugger à la levée d&#8217;une exception Python 5</title>
		<link>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/</link>
		<comments>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/#comments</comments>
		<pubDate>Tue, 04 Sep 2012 14:26:55 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1996</guid>
		<description><![CDATA[Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l'article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.

Oui mais quand votre programme plante, il faut lancer l'éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c'est dans une boucle.

On peut faire mieux.]]></description>
				<content:encoded><![CDATA[<p>Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l&#8217;article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.</p>
<p>Oui mais quand votre programme plante, il faut lancer l&#8217;éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c&#8217;est dans une boucle.</p>
<p>On peut faire mieux. Si vous avez <code>ipdb</code> et <code>ipython</code> installés (et si ce n&#8217;est pas le cas, un <code><a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> install</code> les deux car on ne peut pas vivre sans), au lieu de lancer votre script ainsi:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">python script.py</pre></td></tr></table></div>

<p>Lancez le ainsi:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">ipython <span style="color: #660033;">--pdb</span> script.py</pre></td></tr></table></div>

<p>Et à la première exception, votre shell va directement s&#8217;ouvrir en mode debugger à la bonne ligne.</p>
<p>C&#8217;est pas merveilleux, ça ?</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/701512.jpg" length="7871" type="image/jpg" />	</item>
		<item>
		<title>Debugger en Python: les bases de pdb 4</title>
		<link>http://sametmax.com/debugger-en-python-les-bases-de-pdb/</link>
		<comments>http://sametmax.com/debugger-en-python-les-bases-de-pdb/#comments</comments>
		<pubDate>Sun, 27 May 2012 04:40:05 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[ipdb]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=750</guid>
		<description><![CDATA[Mettez vos prints de debug au placard, et apprenez à programmer debugger comme un homme, un vrai. Un homme qui n'a pas peur d'avoir un mug USB. Heu...]]></description>
				<content:encoded><![CDATA[<p>Mettre une série de <code>print</code> dans son programme a ses limites, et python possède nativement une excellente alternative.</p>
<p>Pour la plupart des langages, on utilise un debugger intégré dans un IDE ou un programme à part. Ou alors on se contente de fonctions telles que <code>var_dump</code> ou <code>print_r</code>. En Python, on utilise le module <code>pdb</code>.</p>
<p>Quand vous voulez savoir ce qui se passe à un endroit du programme, à la ligne précise où vous souhaitez explorer le problème, ajoutez à votre code :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">pdb</span><span style="color: #66cc66;">;</span> <span style="color: #dc143c;">pdb</span>.<span style="color: black;">set_trace</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Et relancez votre programme <strong>depuis une console</strong>.</p>
<p>L&#8217;exécution du programme va alors se figer, et dans la console vous aurez accès à un shell special:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: black;">&#40;</span>Pdb<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>A quoi sert pdb</h2>
<p>Dans ce shell vous pouvez entrer deux choses:</p>
<ul>
<li>N&#8217;importe quelle expression Python qui tient sur une ligne.</li>
<li>Des commandes <code>pdb</code> speciales.</li>
</ul>
<p>Ce qui est génial, c&#8217;est que toute expression Python sera éxécutée dans le context de la ligne où le programme s&#8217;est arrêté.</p>
<p>Donc vous pouvez faire des <code>print</code>, des <code>if</code>, des <a href="http://sametmax.com/python-love-les-listes-en-intention-partie/">listes en intention</a>, bref, tous les tests que vous voulez, avec les variables du programme dans l&#8217;état où elles sont <strong>à ce moment là</strong>.</p>
<p>Vous avez accès à tout le code, y compris vos propres objets, classes et fonctions. En fait, vous avez même accès à l&#8217;import, et donc à toutes les librairies importables.</p>
<h2>L&#8217;essentiel des commandes</h2>
<p>En plus de pouvoir exécuter du Python, vous pouvez utiliser des commandes. Il y en a des nombreuses, mais vous pouvez tirer l&#8217;essentiel de <code>pdb</code> avec six d&#8217;entre elles:</p>
<ul>
<li> <code>l</code>: Liste quelques lignes de code avant et après là où vous vous trouver. Utile pour se resituer dans le contexte du programme. &#8216;l&#8217; pour &#8216;list&#8217;.</li>
<li> <code>n</code>: Exécute la ligne suivante. Vous pouvez ainsi continuer l&#8217;exécution du programme de bout en bout, ligne par ligne, et le tester en entier. &#8216;n&#8217; pour &#8216;next&#8217;.</li>
<li> <code>s</code>: Si votre ligne contient un appel de fonction ou de méthode, rentre dans à l&#8217;intérieur. &#8216;s&#8217; pour &#8216;step in&#8217;.</li>
<li> <code>r</code>: Si vous êtes dans une fonction ou une méthode, celà permet d&#8217;en sortir et de passer dans le scope du dessus. &#8216;r&#8217; pour &#8216;return&#8217;.</li>
<li><code>unt</code>: Si vous êtes à la dernière ligne d&#8217;une boucle, permet de reprendre l&#8217;exécution jusqu&#8217;à la sortie de la boucle. &#8216;unt&#8217; pour &#8216;until&#8217;.</li>
<li><code>q</code>: Quitte brutalement le programme en le faisant crasher. &#8216;q&#8217; pour &#8216;quit&#8217;.</li>
<li><code>c</code>: Quitte le debugger et continue l&#8217;exécution du programme normalement. Tous les changements que vous avez fait dans le code sont pris en compte. &#8216;c&#8217; pour &#8216;continue&#8217;.</li>
</ul>
<p>Pour utiliser une commande, il suffit de taper la lettre et d&#8217;appuyer sur <code>entrée</code>. Si vous appuyez sur <code>entrée</code> sans rien saisir, la commande précédente est exécutée, ce qui vous évitera de spammer le shell de commandes <code>n</code>.</p>
<h2>Les limites de pdb</h2>
<ul>
<li>Les commandes ont priorité sur le code Python. Vous ne pouvez donc pas assigner des variables dont le nom est en une seul lettre. C&#8217;est ennuyeux pour accéder à la variable &#8216;<code>i</code>&#8216; dans une boucle for. Dans ce cas, prefixez &#8216;<code>i</code>&#8216; par un &#8216;<code>!</code>&#8216; et il sera considéré comme du Python, et non comme une commande.</li>
<li>Si vous mettez <code>set_trace</code> dans une boucle, le debugger va se lancer à chaque tour de boucle, ce qui embrouille tout. Dans ce cas, et dans tous les cas où vous voulez que le debugger se lance à un moment particulier, utilisez un <code>if</code> ou un <code>try/except</code> pour que <code>set_trace</code> ne soit appelé que dans un cas précis.</li>
<li>Dans le cas de threads, de processus séparés, ou quand vous n&#8217;avez pas accès à <code>stdout</code>, <code>pdb</code> ne peut rien pour vous. Dans ce cas, le module <a href="http://docs.python.org/library/logging.html?highlight=logging#logging">logging</a> est votre ami.</li>
</ul>
<h2>pdb + ipython = ipdb</h2>
<p>Si vous êtes fan d&#8217;<a href="http://ipython.org/">ipython</a>, un coup de <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> ipdb</pre></td></tr></table></div>

<p>Et ensuite dans le programme:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> ipdb<span style="color: #66cc66;">;</span> ipdb.<span style="color: black;">set_trace</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Vous aurez alors accès au shell de <code>pdb</code>, mais avec en prime les commandes et l&#8217;autocompletion d&#8217;ipython</p>
<h2>Mettre un break point programmatiquement en javascript</h2>
<p>Dans une moindre mesure, on peut aussi lancer un shell de debug depuis javascript. Ouvrez votre fenêtre d&#8217;outils Web intégrés au navigateur, Firebug ou équivalent.</p>
<p>Normalement il faut trouver votre script, puis la ligne, et mettre un break point.</p>
<p>Mais dans les navigateurs récents, vous pouvez juste ajouter:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #FF0000;">debugger</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>A la ligne voulue, et recharger la page. Votre outil de debuggage se mettra au break point automatiquement</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/debugger-en-python-les-bases-de-pdb/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/05/snake-golf-ball.jpg" length="51992" type="image/jpg" />	</item>
	</channel>
</rss>
